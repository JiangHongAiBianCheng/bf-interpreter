<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>brainfuck interpreter</title>
        <script src="js/bf.js"></script>
        <link rel="stylesheet" href="css/ui.css">
    </head>
    <body>
        <div id="viewport">
            <nav>
                <div id="nav-items">
                    <img src="img/icon.png" alt="icon" width="52" height="49" class="nav-item" id="icon">
                    <span class="nav-item" onclick="window.location.href='https://jianghongaibiancheng.github.io/index.html'">首页</span>
                    <span class="nav-item" onclick="window.location.href='https://jianghongaibiancheng.github.io/projects.html'">项目</span>
                </div>
            </nav>
        </div>
        <h1>Brainfuck Interpreter</h1>
        <p>Enter your brainfuck code here:</p>
        <textarea id="code" rows="10" cols="50"></textarea>
        <br>
        <button onclick="runcode()">Run</button>
        <button onclick="clearoutput()">Clear</button>
        <br>
        <textarea id="output" title="output" rows="10" cols="50" readonly></textarea>
        <br><hr><br>
        <p>出于网站运行需求, 我把Python代码转换成了JavaScript代码。</p>
        <p>源码在这：</p>
        <h3>Python</h3>
        <textarea id="python-code" cols="50" rows="35" readonly>def run(chars):
    mem = [0] * 3000
    memPnt = 0
    codePnt = 0
    while codePnt < len(chars):
        match chars[codePnt]:
            case '>':
                if memPnt < len(chars):
                    memPnt += 1
                else:
                    lg.warning('Out of bounds')
            case '<':
                if memPnt > 0:
                    memPnt -= 1
                else:
                    lg.warning('Out of bounds')
            case '+':
                mem[memPnt] += 1
            case '-':
                mem[memPnt] -= 1
            case'.':
                print(chr(mem[memPnt]), end='')
            case',':
                mem[memPnt] = ord(input()[0])
            case'[':
                while mem[memPnt] == 0:
                    codePnt += 1
                    if chars[codePnt] == ']':
                        break
            case']':
                while mem[memPnt] != 0:
                    codePnt -= 1
                    if chars[codePnt] == '[':
                        break
        codePnt += 1</textarea>
        <p>仓库地址: <a href="https://github.com/JiangHongAiBianCheng/Brain-F-k-Interpreter">仓库地址</a></p>
        <h3>JavaScript</h3>
        <textarea id="js-code" cols="50" rows="55" readonly>function run(code) {
    let codePnt = 0;
    let memPnt = 0;
    let output = '';
    let mem_len = 30000;
    let mem = new Array(mem_len).fill(0);

    while (codePnt < code.length) {
    switch (code[codePnt]) {
        case '>':
        if (memPnt < mem.length) {
            memPnt++;
        } else {
            console.warn('Out of bounds');
        }
        break;
        case '<':
        if (memPnt > 0) {
            memPnt--;
        } else {
            console.warn('Out of bounds');
        }
        break;
        case '+':
        mem[memPnt]++;
        break;
        case '-':
        mem[memPnt]--;
        break;
        case '.':
        output += String.fromCharCode(mem[memPnt]);
        break;
        case ',':
        var input = prompt();
        mem[memPnt] = input.charCodeAt(0);
        break;
        case '[':
        if (mem[memPnt] === 0){
            while (code[codePnt] !== ']') {
                codePnt++;
            }
        }
        break;
        case ']':
        if (mem[memPnt] !== 0){
            while (code[codePnt] !== '[') {
                codePnt--;
            }
        }
        break;
    }
    codePnt++;
    }
    return output;
}</textarea>
    </body>
</html>
